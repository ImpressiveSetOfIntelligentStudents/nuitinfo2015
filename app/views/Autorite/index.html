#{extends 'Autorite/main.html' /}
#{set title:'Accueil' /}


<head>
    <script src="https://maps.googleapis.com/maps/api/js"></script>
    <script src="@{'/public/javascripts/Chart.js-master/Chart.js'}"></script>

    <style>
        #map {
            width: 650px;
            height: 400px;
        }
    </style>
</head>

<!-- Page Content -->
<div class="container">

    <!-- Marketing Icons Section -->
    <div class="row">
        <h1 class="page-header">
            Informations générales
        </h1>
        <div class="col-lg-7">
            <div id="map">Chargement de la map</div>

            <BR>
            <h3>Tendances</h3>
            <canvas id="myChart" width="650" height="400"></canvas>
        </div>
        <div class="col-lg-5">

            <table class="table">

                <thead>
                    <tr>
                        <th></th>
                        <th>Date</th>
                        <th>Description</th>

                    </tr>
                </thead>
                <tbody>
                #{list items:events, as:'item'}
                    <tr>
                        <td><a href="@{Autorite.details(item?.id)}"><span aria-hidden="true" class="glyphicon glyphicon-zoom-in"></span></a></td>
                        <td>${item?.dateCreation}</td>
                        <td>#{if item?.lesPosts.size() > 0}${item?.lesPosts?.get(0)}#{/if}</td>
                    </tr>
                #{/list}
                </tbody>


            </table>
            <form method="post" action="@{Autorite.ajouterEvenementPost()}">
                // FORM A FAIRE
                <input type="submit" class="btn btn-success" value="AJOUTER">
            </form>


        </div>
    </div>




    <!-- /.row -->
</div>
<!-- /.container -->



#{set 'scriptsJS'}
<script>
    function initialize() {
        var mapCanvas = document.getElementById('map');
        var mapOptions = {
            center: new google.maps.LatLng(44.5403, -78.5463),
            zoom: 8,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(mapCanvas, mapOptions)
    }
    google.maps.event.addDomListener(window, 'load', initialize);



    var ctx = document.getElementById("myChart").getContext("2d");



    var data = {
        labels: ["January", "February", "March", "April", "May", "June", "July"],
        datasets: [
            {
                label: "My First dataset",
                fillColor: "rgba(220,220,220,0.2)",
                strokeColor: "rgba(220,220,220,1)",
                pointColor: "rgba(220,220,220,1)",
                pointStrokeColor: "#fff",
                pointHighlightFill: "#fff",
                pointHighlightStroke: "rgba(220,220,220,1)",
                data: [65, 59, 80, 81, 56, 55, 40]
            },
            {
                label: "My Second dataset",
                fillColor: "rgba(151,187,205,0.2)",
                strokeColor: "rgba(151,187,205,1)",
                pointColor: "rgba(151,187,205,1)",
                pointStrokeColor: "#fff",
                pointHighlightFill: "#fff",
                pointHighlightStroke: "rgba(151,187,205,1)",
                data: [28, 48, 40, 19, 86, 27, 90]
            }
        ]
    };


    var options = {

        ///Boolean - Whether grid lines are shown across the chart
        scaleShowGridLines : true,

    };


    var myLineChart = new Chart(ctx).Line(data, options);




</script>
#{/set}