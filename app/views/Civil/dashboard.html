#{extends 'main.html' /}
#{set title:'Accueil' /}

<!-- Page Content -->
<div class="container">

    <!-- Marketing Icons Section -->
    <div class="row">
        <div class="col-lg-12">
            <h1>Bienvenue</h1>
            <p>Tralalalalalalalalalala </p>
        </div>
        <div class="col-lg-9">
            <h2>Communiquer</h2>

            <form method="POST" action="@{Civil.ajouterPost()}">
                <textarea name="post"></textarea>
                <input type="hidden" name="lon" value=""/>
                <input type="hidden" name="lat" value=""/>
                <input type="submit" class="btn btn-success">Valider<input/>
            </form>

            <h2>Les posts</h2>
            #{list items:lesPosts, as:'post'}
            <div class="panel panel-info">
                <div class="panel-heading"><strong>Anonyme</strong></div>
                <div class="panel-body">
                    <p>${post.text}</p>
                    #{if post.media}
                        <div>${post.media}</div>
                    #{/if}
                </div>
            </div>
            #{/list}

            #{if nbPosts > 5}
            <ul class="pagination">
                #{list items:0..(nbPosts/5), as:'i'}
                    <li><a href="@{Civil.dashboard(5, i)}">${i + 1}</a></li>
                #{/list}
            </ul>
            #{/if}


            <h2>Carte des évènements</h2>
            <div onload="initialiser()">
                <div id="carte" style="width:100%; height:100%"></div>
            </div>
        </div>

        <div class="col-lg-3">
            <h2 class="page-header">
                Module de chat
            </h2>
        </div>
    </div>
    <!-- /.row -->
</div>
<!-- /.container -->

#{set 'scriptsJS'}
    <!-- Inclusion de l'API Google MAPS -->
    <!-- Le paramètre "sensor" indique si cette application utilise détecteur pour déterminer la position de l'utilisateur -->
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
        function initialiser() {
            var latlng = new google.maps.LatLng(46.779231, 6.659431);
            //objet contenant des propriétés avec des identificateurs prédéfinis dans Google Maps permettant
            //de définir des options d'affichage de notre carte
            var options = {
                center: latlng,
                zoom: 19,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            //constructeur de la carte qui prend en paramêtre le conteneur HTML
            //dans lequel la carte doit s'afficher et les options
            var carte = new google.maps.Map(document.getElementById("carte"), options);
        }
    </script>
#{/set}